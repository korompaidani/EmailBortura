<script src="https://cdn.emailjs.com/dist/email.min.js"></script>
<script type="text/javascript">
    (function() {
        emailjs.init("");
    })();

    function sendEmail(e) {
        e.preventDefault();

        const senderEmail = document.getElementById('senderEmail').value;
        const senderName = document.getElementById('senderName').value;
        const participants = document.getElementById('participants').value;
        const billingAddress = document.getElementById('billingAddress').value;
        const participantsArray = participants.split(',');
        const numberOfParticipants = participantsArray.length;

        const emailBody = `
        Kedves Szervezők!

        ${numberOfParticipants} főre szeretnék nevezni az idei 2024.09.28-án megrendezésre kerülő Nyitott pincék túrára:

        ${participantsArray.join('\n')}

        Számlázási cím: ${billingAddress}

        Köszönettel,
        ${senderName}
        `;

        emailjs.send("YOUR_SERVICE_ID", "YOUR_TEMPLATE_ID", {
            from_name: senderName,
            from_email: senderEmail,
            message: emailBody,
            to_email: 'korompaidani@gmail.com'
        }).then(function(response) {
            alert('Email sent successfully!');
        }, function(error) {
            alert('Failed to send email');
        });
    }
</script>
